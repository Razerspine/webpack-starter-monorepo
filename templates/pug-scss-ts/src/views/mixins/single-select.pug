//- singleSelect mixin
//- Renders a configurable <select> element with label, options, and optional placeholder.
//- Supports both arrays of strings and arrays of objects with configurable
//- keys for label and value. Provides ability to set a default selected option.
//-
//- Parameters:
//-   id             - **String** — Unique identifier for the <select> element.
//-                    Also used as the `name` attribute.
//-                    Example: 'topic', 'country'.
//-                    Default: none (required).
//-   label          - **String | null** — Visible label text. If `null` or empty,
//-                    no label is rendered.
//-                    Example: 'Topic', 'Choose country'.
//-                    Default: null.
//-   options        - **Array** — Options to render. Can be:
//-                      - Array of strings: ['Support', 'Feedback', 'Other']
//-                      - Array of objects: [{value:'support', text:'Support'}, …]
//-                      - Array of objects with custom keys (see labelKey/valueKey).
//-                    Default: [].
//-   labelKey       - **String** — Key name in option objects for display text.
//-                    Example: 'text', 'label'.
//-                    Default: 'text'.
//-   valueKey       - **String** — Key name in option objects for option value.
//-                    Example: 'value', 'id'.
//-                    Default: 'value'.
//-   selectedValue  - **String** — Value of the option that should be selected
//-                    by default. If empty, no option is preselected.
//-                    Example: 'feedback', '2'.
//-                    Default: ''.
//-   placeholder    - **String** — Text for a placeholder option. Rendered only
//-                    if `label` is null and `selectedValue` is empty.
//-                    Example: 'Choose an option', 'Select country'.
//-                    Default: 'Choose an option'.
//-
//- Behavior:
//-   - If `options` is an array of strings, each string is used as both
//-     the option value and label.
//-   - If `options` is an array of objects, the keys defined by `labelKey`
//-     and `valueKey` are used.
//-   - The option whose value matches `selectedValue` is rendered with
//-     the `selected` attribute.
//-   - If no label is provided and no selectedValue is set, a placeholder
//-     option is rendered at the top (`disabled selected hidden`).
//-   - The <select> element always has `.single-select` class for styling.
//-   - The label, if provided, uses `.form-label` class.
//-
//- Notes about styling and classes:
//-   - Visual appearance is controlled by `.single-select` and `.form-label`
//-     styles in your SCSS.
//-   - To add custom classes or attributes, extend the mixin or wrap it.
//-   - Ensure `id` is unique to avoid duplicate `for`/`id` collisions.
//-
//- Examples:
//-   // Simple array of strings
//-   +singleSelect('topic1', 'Topic', ['Support', 'Feedback', 'Other'])
//-
//-   // Array of objects with value/text
//-   +singleSelect('topic2', 'Topic', [
//-     {value:'support', text:'Support'},
//-     {value:'feedback', text:'Feedback'},
//-     {value:'other', text:'Other'}
//-   ])
//-
//-   // Array of objects with id/label, custom keys
//-   +singleSelect('topic3', 'Topic', [
//-     {id:'1', label:'Support'},
//-     {id:'2', label:'Feedback'}
//-   ], 'label', 'id')
//-
//-   // With default selected value
//-   +singleSelect('topic4', 'Topic', [
//-     {value:'support', text:'Support'},
//-     {value:'feedback', text:'Feedback'},
//-     {value:'other', text:'Other'}
//-   ], 'text', 'value', 'feedback')
//-
//-   // Without label, with placeholder
//-   +singleSelect('topic5', null, [
//-     {value:'support', text:'Support'},
//-     {value:'feedback', text:'Feedback'},
//-     {value:'other', text:'Other'}
//-   ], 'text', 'value', '', 'Please select a topic')
mixin singleSelect(id, label, options, labelKey='text', valueKey='value', selectedValue='', placeholder='Choose an option')
  if label
    label.form-label(for=id data-i18n=label)= label
  select.single-select(id=id, name=id required)
    if !label && !selectedValue
      option(value='', disabled, selected, hidden data-i18n=placeholder)= placeholder
    each opt in options
      - let value = typeof opt === 'string' ? opt : opt[valueKey];
      - let textKey = typeof opt === 'string' ? opt : opt[labelKey];
      option(value=value, data-opt-value=value, selected=(value === selectedValue), data-i18n=textKey)= textKey
